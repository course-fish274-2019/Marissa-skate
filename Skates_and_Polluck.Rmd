---
title: "Skates and their Prey"
author: "Marissa Leatherman"
date: "11/14/2019"
output: html_document
---

# Mini Project - Skate and Prey Analysis

Comparing Arctic skate *Bathyraja* and known prey Walleye Polluck *Gadus*.
How do the distributions of known predator and prey vary with depth and water temperature in the Eastern Bering Sea?

In this document:

1. Cleaned data will be loaded, original data from [2017-2018 Eastern Bering Sea Shelf Groundfish Bottom Trawl Survey](https://www.fisheries.noaa.gov/resource/data/2017-2018-eastern-bering-sea-shelf-groundfish-bottom-trawl-survey-data)
2.Data will be filtered and chosen, then analyzed for graphical use
3. Visualizations will be made that display the distribution of the two chosen species by depth and temperature

## Required packages

```{r libraries}
library(dplyr)
library(ggplot2)
library(tidyr)
```

## Importing Data

```{r data}
trawldata <- read.csv("data_raw/ebs2017_2018.csv")
```

## Create separate columns for Genus and species

```{r column}
trawl_gensp <-
  trawldata %>%
  separate('GENUS_SPECIES', c('Genus','species'),'_', extra='drop')%>%
  select(BOT_TEMP,BOT_DEPTH,Genus)
```

## Filter out Genus with less than 1500 samples, print table, choose prey species of chosen predator *Bathyraja*

### Create data frame for each chosen Genus

```{r filter}
largegroup <-
  trawl_gensp %>%
  group_by(Genus) %>%
  summarize(count=n()) %>%
  filter(count>1500) %>%
  na.omit()

WE_poll <- 
  trawl_gensp %>%
  filter(Genus=='Gadus')
skate <- 
  trawl_gensp %>%
  filter(Genus=='Bathyraja')

knitr::kable(head(largegroup))

```

## Create scatterplot with depth increasing downwards on the y-axis and temperature on the x-axis, with different colors for *Bathyraja* and *Gadus*
### Hey Dr. Roberts, did I get real results???

```{r plot1}
ggplot() +
  geom_point(data=WE_poll, mapping = aes(x = BOT_TEMP, y = BOT_DEPTH), color='blue', alpha = 0.3)+
  geom_point(data=skate, mapping = aes(x = BOT_TEMP, y = BOT_DEPTH), color='orange', alpha= 0.3)+
  scale_y_reverse()+
  scale_x_continuous(position='top')+
  labs(x='Temperature at Bottom (degrees C)',y='Depth of Ocean Floor Below Sea Level(m)')+
  labs(title='Distribution of *Bathyraja* and *Gadus* species 
       in the Bering Strait at Depth and Temperature')

ggsave('figures/dist_toget.jpg')
  
```

## Plot separately to compare while being able to see all data points

```{r plot2}

ggplot() +
  geom_point(data=WE_poll, mapping = aes(x = BOT_TEMP, y = BOT_DEPTH), color='blue', alpha = 0.3)+
  geom_point(data=skate, mapping = aes(x = BOT_TEMP, y = BOT_DEPTH), color='orange', alpha= 0.3)+
  scale_y_reverse()+
  scale_x_continuous(position='top')+
  labs(x='Temperature at Bottom (degrees C)',y='Depth of Ocean Floor Below Sea Level(m)')+
  labs(title='Distribution of *Bathyraja* and *Gadus* species 
       in the Bering Strait at Depth and Temperature')+
  facet_wrap(~Genus)

ggsave('figures/dist_2.jpg')
```

